package:
  name: opensm-cos7-armv7l
  version: 3.3.21

source:
  - url: http://mirror.centos.org/altarch/7/os/armhfp/Packages/opensm-3.3.21-3.el7_8.armv7hl.rpm
    sha256: 8b027902eb5d76a1d45861d90d4bf504ff58a1b359e5dd8f22afe7433d774f43
    no_hoist: true
    folder: binary
  # - url: http://vault.centos.org/7.7.1908/os/Source/SPackages/opensm-3.3.21-3.el7_8.src.rpm
  #   no_hoist: true
  #   folder: source

build:
  number: {{ cdt_build_number|int + 1000 }}
  noarch: generic
  binary_relocation: False
  detect_binary_files_with_prefix: False
  missing_dso_whitelist:
    - '*'

requirements:
  host:
    - sysroot_linux-armv7l 2.17.*
  run:
    - sysroot_linux-armv7l 2.17.*

test:
  commands:
    - echo "it installs!"

about:
  home: https://github.com/linux-rdma/opensm
  license: GPLv2 or BSD
  license_family: GPL2
  license_file: {{ SRC_DIR }}/binary/usr/share/licenses/opensm-3.3.21/COPYING
  summary: "(CDT) OpenIB InfiniBand Subnet Manager and management utilities"
  description: |
        OpenSM is the OpenIB project's Subnet Manager for Infiniband networks. The
        subnet manager is run as a system daemon on one of the machines in the
        infiniband fabric to manage the fabric's routing state.  This package also
        contains various tools for diagnosing and testing Infiniband networks that can
        be used from any machine and do not need to be run on a machine running the
        opensm daemon.

extra:
  recipe-maintainers:
    - conda-forge/help-cdts
